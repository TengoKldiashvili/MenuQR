{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/Desktop/MenuQR/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const db =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: process.env.NODE_ENV === \"development\" ? [\"error\", \"warn\"] : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,KACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;KAAO,GAAG;AACpE;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/Desktop/MenuQR/lib/auth-options.ts"],"sourcesContent":["import { NextAuthOptions } from \"next-auth\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport { db } from \"./db\";\nimport bcrypt from \"bcryptjs\";\n\nexport const authOptions: NextAuthOptions = {\n  providers: [\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        const user = await db.user.findUnique({\n          where: { email: credentials.email },\n        });\n\n        if (!user) {\n          return null;\n        }\n\n        const isPasswordValid = await bcrypt.compare(\n          credentials.password,\n          user.passwordHash\n        );\n\n        if (!isPasswordValid) {\n          return null;\n        }\n\n        return {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n        };\n      },\n    }),\n  ],\n\n  session: {\n    strategy: \"jwt\",\n  },\n\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user.id;\n        token.email = user.email;\n        token.name = user.name;\n      }\n      return token;\n    },\n\n    async session({ session, token }) {\n      if (session.user) {\n        session.user.id = token.id;\n        session.user.email = token.email;\n        session.user.name = token.name;\n      }\n      return session;\n    },\n  },\n\n  pages: {\n    signIn: \"/login\",\n  },\n\n  secret: process.env.NEXTAUTH_SECRET,\n};\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAEO,MAAM,cAA+B;IAC1C,WAAW;QACT,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YAEA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,iHAAE,CAAC,IAAI,CAAC,UAAU,CAAC;oBACpC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAC;gBACpC;gBAEA,IAAI,CAAC,MAAM;oBACT,OAAO;gBACT;gBAEA,MAAM,kBAAkB,MAAM,8IAAM,CAAC,OAAO,CAC1C,YAAY,QAAQ,EACpB,KAAK,YAAY;gBAGnB,IAAI,CAAC,iBAAiB;oBACpB,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IAED,SAAS;QACP,UAAU;IACZ;IAEA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,KAAK,GAAG,KAAK,KAAK;gBACxB,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,OAAO;QACT;QAEA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,KAAK,GAAG,MAAM,KAAK;gBAChC,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAChC;YACA,OAAO;QACT;IACF;IAEA,OAAO;QACL,QAAQ;IACV;IAEA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/Desktop/MenuQR/lib/limits.ts"],"sourcesContent":["export const LIMITS = {\n  // existing limits\n  FREE_MENU_LIMIT: 10,\n  FREE_CATEGORY_LIMIT: 10,\n  FREE_ITEM_LIMIT: 50,\n\n  // resend\n  RESEND_CODE_COOLDOWN_SECONDS: 60,\n\n  // verify email\n  VERIFY_EMAIL_CODE_TTL_MINUTES: 10,\n  VERIFY_EMAIL_MAX_ATTEMPTS: 5,\n  VERIFY_EMAIL_MAX_SENDS: 3,\n\n  // reset password\n  PASSWORD_RESET_CODE_TTL_MINUTES: 10,\n  PASSWORD_RESET_MAX_ATTEMPTS: 5,\n  FORGOT_PASSWORD_MAX_SENDS: 3,\n} as const;\n"],"names":[],"mappings":";;;;AAAO,MAAM,SAAS;IACpB,kBAAkB;IAClB,iBAAiB;IACjB,qBAAqB;IACrB,iBAAiB;IAEjB,SAAS;IACT,8BAA8B;IAE9B,eAAe;IACf,+BAA+B;IAC/B,2BAA2B;IAC3B,wBAAwB;IAExB,iBAAiB;IACjB,iCAAiC;IACjC,6BAA6B;IAC7B,2BAA2B;AAC7B"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/Desktop/MenuQR/i18n/index.ts"],"sourcesContent":["export const locales = [\"en\", \"ka\"] as const;\nexport type Locale = (typeof locales)[number];\n\nexport const defaultLocale: Locale = \"en\";\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,UAAU;IAAC;IAAM;CAAK;AAG5B,MAAM,gBAAwB"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/Desktop/MenuQR/i18n/request.ts"],"sourcesContent":["import { getRequestConfig } from \"next-intl/server\";\nimport { locales, defaultLocale, type Locale } from \"./index\";\n\nexport default getRequestConfig(async ({ locale }) => {\n  const resolvedLocale: Locale = locales.includes(locale as Locale)\n    ? (locale as Locale)\n    : defaultLocale;\n\n  return {\n    locale: resolvedLocale,\n    messages: (await import(`../messages/${resolvedLocale}.json`)).default,\n  };\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;;;uCAEe,IAAA,gRAAgB,EAAC,OAAO,EAAE,MAAM,EAAE;IAC/C,MAAM,iBAAyB,0HAAO,CAAC,QAAQ,CAAC,UAC3C,SACD,gIAAa;IAEjB,OAAO;QACL,QAAQ;QACR,UAAU,CAAC;;;;;;;;;kBAAa,CAAC,YAAY,EAAE,eAAe,KAAK,CAAC,CAAC,EAAE,OAAO;IACxE;AACF"}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/Desktop/MenuQR/app/api/menus/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/lib/auth-options\";\nimport { db } from \"@/lib/db\";\nimport { LIMITS } from \"@/lib/limits\";\nimport { getTranslations } from \"next-intl/server\";\n\n// Derive locale from the first path segment in the request URL\nfunction getLocaleFromRequest(request: NextRequest): string {\n  const pathname = request.nextUrl.pathname;\n  const locale = pathname.split(\"/\")[1];\n  return locale || \"en\";\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const locale = getLocaleFromRequest(request);\n    const t = await getTranslations({\n      locale,\n      namespace: \"apiMenus\",\n    });\n\n    const session = await getServerSession(authOptions);\n\n    if (!session?.user?.id) {\n      return NextResponse.json({ error: t(\"unauthorized\") }, { status: 401 });\n    }\n\n    const menus = await db.menu.findMany({\n      where: { userId: session.user.id },\n      include: {\n        categories: {\n          include: {\n            items: true,\n          },\n        },\n      },\n      orderBy: { createdAt: \"desc\" },\n    });\n\n    return NextResponse.json(menus);\n  } catch (error) {\n    console.error(\"Error fetching menus:\", error);\n    return NextResponse.json(\n      { error: \"Internal server error\" },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const locale = getLocaleFromRequest(request);\n    const t = await getTranslations({\n      locale,\n      namespace: \"apiMenus\",\n    });\n\n    const session = await getServerSession(authOptions);\n\n    if (!session?.user?.id) {\n      return NextResponse.json({ error: t(\"unauthorized\") }, { status: 401 });\n    }\n\n    const menusCount = await db.menu.count({\n      where: { userId: session.user.id },\n    });\n\n    if (menusCount >= LIMITS.FREE_MENU_LIMIT) {\n      return NextResponse.json(\n        { error: t(\"menuLimitReached\") },\n        { status: 403 }\n      );\n    }\n\n    const body = await request.json();\n    const { title, description, theme, logoUrl } = body;\n\n    if (!title || !title.trim()) {\n      return NextResponse.json({ error: t(\"titleRequired\") }, { status: 400 });\n    }\n\n    const menu = await db.menu.create({\n      data: {\n        title: title.trim(),\n        description: description || null,\n        theme: theme || \"light\",\n        logoUrl: logoUrl || null,\n        userId: session.user.id,\n      },\n    });\n\n    return NextResponse.json(menu, { status: 201 });\n  } catch (error) {\n    console.error(\"Error creating menu:\", error);\n    return NextResponse.json(\n      { error: \"Internal server error\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEA,+DAA+D;AAC/D,SAAS,qBAAqB,OAAoB;IAChD,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IACzC,MAAM,SAAS,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;IACrC,OAAO,UAAU;AACnB;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,SAAS,qBAAqB;QACpC,MAAM,IAAI,MAAM,IAAA,6QAAe,EAAC;YAC9B;YACA,WAAW;QACb;QAEA,MAAM,UAAU,MAAM,IAAA,2JAAgB,EAAC,uIAAW;QAElD,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,EAAE;YAAgB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,QAAQ,MAAM,iHAAE,CAAC,IAAI,CAAC,QAAQ,CAAC;YACnC,OAAO;gBAAE,QAAQ,QAAQ,IAAI,CAAC,EAAE;YAAC;YACjC,SAAS;gBACP,YAAY;oBACV,SAAS;wBACP,OAAO;oBACT;gBACF;YACF;YACA,SAAS;gBAAE,WAAW;YAAO;QAC/B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,SAAS,qBAAqB;QACpC,MAAM,IAAI,MAAM,IAAA,6QAAe,EAAC;YAC9B;YACA,WAAW;QACb;QAEA,MAAM,UAAU,MAAM,IAAA,2JAAgB,EAAC,uIAAW;QAElD,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,EAAE;YAAgB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,aAAa,MAAM,iHAAE,CAAC,IAAI,CAAC,KAAK,CAAC;YACrC,OAAO;gBAAE,QAAQ,QAAQ,IAAI,CAAC,EAAE;YAAC;QACnC;QAEA,IAAI,cAAc,yHAAM,CAAC,eAAe,EAAE;YACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,EAAE;YAAoB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;QAE/C,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI;YAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,EAAE;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,MAAM,OAAO,MAAM,iHAAE,CAAC,IAAI,CAAC,MAAM,CAAC;YAChC,MAAM;gBACJ,OAAO,MAAM,IAAI;gBACjB,aAAa,eAAe;gBAC5B,OAAO,SAAS;gBAChB,SAAS,WAAW;gBACpB,QAAQ,QAAQ,IAAI,CAAC,EAAE;YACzB;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ;QAAI;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}